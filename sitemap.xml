<search><entry><title>éƒ¨ç½² Spring Boot application åˆ° local Kubernetes cluster</title><url>https://2ndbrain.cc/posts/2022/07/spring-boot-on-kubernetes/</url><categories><category>æŠ€è¡“</category></categories><tags><tag>spring-boot</tag><tag>gradle</tag><tag>docker</tag><tag>kubernetes</tag></tags><content type="html"> ç°¡å–®å›é¡§ä¸€ä¸‹ä¹‹å‰çš„é€™ç¯‡å»ºç«‹å®¹å™¨åŒ– Spring Boot å°ˆæ¡ˆæ–‡ç« ä¸­ï¼Œæåˆ°å¦‚ä½•å®¹å™¨åŒ– Spring Boot applicationï¼Œæœ¬ç¯‡è¦å»¶çºŒé€™å€‹ä¸»é¡Œï¼Œé€²éšåˆ°å°‡ application éƒ¨ç½²åˆ° local Kubernetes cluster ä¸Šã€‚
å®¹å™¨åŒ– Spring Boot application ä½¿ç”¨ Spring Initailizr ç¶²ç«™æˆ– Intellij IDEA å…§çš„ Spring Initailizr å‰µå»º Spring Boot applicationï¼Œæœå‹™åç¨±ä»¥ moat-api-gateway ç‚ºä¾‹ã€‚
åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤å»ºç½® Docker image åˆ° local çš„ Docker daemon
Gradle Maven ./gradlew bootBuildImage ./mvnw spring-boot:build-image å°±å¯ä»¥åœ¨ Docker Desktop çš„ Dashboard çœ‹åˆ°å‰›å‰›å»ºç½®çš„ moat-api-gateway imageï¼š å€¼å¾—æ³¨æ„çš„æ˜¯ image çš„å»ºç«‹æ™‚é–“æ˜¯åœ¨ 42 å¹´å‰ï¼Œç‚ºäº†é‡è¤‡å»ºç½® image æ™‚èƒ½ç”¢å‡ºç›¸åŒ hash çš„ image idï¼Œæ‰€ä»¥ Buildpacks çš„ timestamp æ˜¯å›ºå®šå€¼ 1ã€‚
ä¸Šå‚³ image åˆ° local Docker Registry 2.0 2 å•Ÿå‹• local Docker Registry 2.0 $ docker run -d -p 5000:5000 --name docker-registry registry:2 å°‡ gradle å»ºç½®å‡ºä¾†çš„ image é‡æ–° tag å–åç‚º localhost:5000/moat-api-gateway:0.0.1-SNAPSHOT $ docker image tag moat-api-gateway:0.0.1-SNAPSHOT localhost:5000/moat-api-gateway:0.0.1-SNAPSHOT æ‰èƒ½ä¸Šå‚³ image åˆ° local Docker Registry 2.0 $ docker push localhost:5000/moat-api-gateway:0.0.1-SNAPSHOT å•Ÿå‹• Local Kubernetes cluster åœ¨ Docker Desktop Dashboard çš„ Preferencesï¼Œå•Ÿç”¨ä¸¦å•Ÿå‹• Kubernetes æŸ¥çœ‹ Kubernetes Cluster è³‡è¨Š
$ kubectl cluster-info Kubernetes control plane is running at https://kubernetes.docker.internal:6443 CoreDNS is running at https://kubernetes.docker.internal:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy To further debug and diagnose cluster problems, use &amp;#39;kubectl cluster-info dump&amp;#39;. $ kubectl get all NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/kubernetes ClusterIP 10.96.0.1 &amp;lt;none&amp;gt; 443/TCP 20d éƒ¨ç½²åˆ° local Kubernetes cluster 3 é€é kubectl cli ç”¢å‡º deployment.yaml æª” $ kubectl create deployment moat-api-gateway \ --image=localhost:5000/moat-api-gateway:0.0.1-SNAPSHOT \ --dry-run -o=yaml &amp;gt; deployment.yaml $ echo --- &amp;gt;&amp;gt; deployment.yaml $ kubectl create service clusterip moat-api-gateway \ --tcp=8080:8080 --dry-run -o=yaml &amp;gt;&amp;gt; deployment.yaml åŸ·è¡Œ deployment.yaml æª” $ kubectl apply -f deployment.yaml deployment.apps/moat-api-gateway created service/moat-api-gateway created é‡è¤‡åŸ·è¡Œ kubectl get allï¼ŒæŸ¥çœ‹ pod çš„ç‹€æ…‹ç‚º Running $ kubectl get all NAME READY STATUS RESTARTS AGE pod/moat-api-gateway-5c565c8df4-hpc9q 1/1 Running 0 3m22s NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/kubernetes ClusterIP 10.96.0.1 &amp;lt;none&amp;gt; 443/TCP 21d service/moat-api-gateway ClusterIP 10.103.138.110 &amp;lt;none&amp;gt; 8080/TCP 76m NAME READY UP-TO-DATE AVAILABLE AGE deployment.apps/moat-api-gateway 1/1 1 1 3m22s NAME DESIRED CURRENT READY AGE replicaset.apps/moat-api-gateway-5c565c8df4 1 1 1 3m22s é€é SSH tunnel å°±èƒ½å¾ http://localhost:8080 é€£é€² Kubernetes $ kubectl port-forward svc/moat-api-gateway 8080:8080 (Optional) éƒ¨ç½² Kubernetes Dashboard 4 é è¨­ä¸æœƒæœ‰ Kubernetes Dashboardï¼Œè¦ç”¨ä»¥ä¸‹æŒ‡ä»¤éƒ¨ç½²ï¼š
$ kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.5.0/aio/deploy/recommended.yaml åŸ·è¡Œ kubectl proxy æŒ‡ä»¤å¾Œï¼Œå°±èƒ½åœ¨ç€è¦½å™¨ç”¨ http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/ çœ‹åˆ° Dashboardã€‚
$ kubectl proxy Starting to serve on 127.0.0.1:8001 å»ºç«‹ä¸¦åŸ·è¡Œå…·æœ‰ admin æ¬Šé™çš„ä½¿ç”¨è€…çš„ dashboard-adminuser.yaml è¨­å®šæª”
apiVersion: v1 kind: ServiceAccount metadata: name: admin-user namespace: kubernetes-dashboard --- apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRoleBinding metadata: name: admin-user roleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: cluster-admin subjects: - kind: ServiceAccount name: admin-user namespace: kubernetes-dashboard $ kubectl apply -f /path/to/dashboard-adminuser.yaml serviceaccount/admin-user created clusterrolebinding.rbac.authorization.k8s.io/admin-user created åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ç”¢å‡º Bearer Tokenï¼Œä½¿ç”¨æ­¤ Token ç™»å…¥ Kubernetes Dashboard
$ kubectl -n kubernetes-dashboard create token admin-user Spring Boot 2.3.0 buildpack builds image with creation date 40 years ago &amp;#x21a9;&amp;#xfe0e;
Docker Registry &amp;#x21a9;&amp;#xfe0e;
Spring Boot Kubernetes &amp;#x21a9;&amp;#xfe0e;
Deploy and Access the Kubernetes Dashboard &amp;#x21a9;&amp;#xfe0e;</content></entry><entry><title>åœ¨ WebStorm å»ºç½® Jest å–®å…ƒæ¸¬è©¦</title><url>https://2ndbrain.cc/posts/2021/09/setup-jest/</url><categories><category>æŠ€è¡“</category></categories><tags><tag>npm</tag><tag>jest</tag><tag>javascript</tag></tags><content type="html"> åŠ å…¥ Jest Library WebStorm é è¨­æ²’æœ‰è¼‰å…¥ Jestï¼Œæ‰€ä»¥æœƒç„¡æ³•è­˜åˆ¥ Jest èªæ³•ï¼Œ
è¦å¾ Preferences â†’ Languages &amp;amp; Frameworks â†’ JavaScript â†’ Libraries åŠ å…¥ Jest Libraryã€‚
â‘  é»æ“Š Download â‘¡ åŠ å…¥ Jest Library ç”¨ npm å®‰è£ Jest npm init npm install jest è¨­å®š Jest Configuration</content></entry><entry><title>è§£æ±º ORA-02292 å•é¡Œ</title><url>https://2ndbrain.cc/posts/2021/07/resolve-ora-02292/</url><categories><category>æŠ€è¡“</category></categories><tags><tag>oracle-database</tag><tag>sql</tag></tags><content type="html"> åœ¨åˆªé™¤è³‡æ–™è¡¨ä¸­çš„è³‡æ–™ï¼Œæœ‰æ™‚æœƒç™¼ç”Ÿ ORA-02292 é•åå®Œæ•´æ€§é™åˆ¶æ¢ä»¶ (%s.%s) - ç™¼ç¾å­é …è¨˜éŒ„ éŒ¯èª¤ï¼Œ å°è‡´ç„¡æ³•å°‡è³‡æ–™åˆªé™¤ï¼Œå› ç‚ºæƒ³åˆªé™¤çš„è³‡æ–™æ˜¯å…¶ä»–è³‡æ–™è¡¨çš„ Foreign Keyã€‚
éŒ¯èª¤ä»£ç¢¼: ORA-02292
æè¿°: é•åå®Œæ•´æ€§é™åˆ¶æ¢ä»¶ (%s.%s) - ç™¼ç¾å­é …è¨˜éŒ„
åŸå› : å˜—è©¦åˆªé™¤å…·æœ‰å¤–éµä¾è³´æ€§çš„çˆ¶éµå€¼ã€‚
å‹•ä½œ: é¦–å…ˆåˆªé™¤ä¾è³´é …ï¼Œç„¶å¾Œåˆªé™¤çˆ¶é …æˆ–ç¦ç”¨ç´„æŸã€‚
æ­£è¦åˆªé™¤ ç•¶å…©å¼µè³‡æ–™è¡¨å­˜åœ¨è‘—çˆ¶å­éšå±¤é—œä¿‚ï¼Œè€Œçˆ¶éšå±¤çš„è³‡æ–™æ˜¯å­éšå±¤çš„è³‡æ–™å°ç…§ï¼Œ æ‰€ä»¥è³‡æ–™åº«ä¸å…è¨±å…ˆå°‡çˆ¶éšå±¤è³‡æ–™åˆªé™¤ã€‚æ­¤æ™‚æƒ³åˆªé™¤çˆ¶éšå±¤è³‡æ–™ï¼Œå¿…é ˆå…ˆåˆªé™¤å­éšå±¤è³‡æ–™ã€‚
å–å·§åˆªé™¤ æä¸æ¸…æ¥šè‡ªå·±åœ¨åšä»€éº¼çš„è©±ï¼Œä¸è¦äº‚ç”¨é€™æ‹›ã€‚
è‹¥å› ç‚ºæŸäº›åŸå› å°±æ˜¯æƒ³ç›´æ¥åˆªé™¤çˆ¶éšå±¤è³‡æ–™ï¼Œè€Œä¸å‹•åˆ°å­éšå±¤è³‡æ–™æ™‚ï¼Œå¯ä»¥ä½¿ç”¨ç¦ç”¨ç´„æŸçš„æ–¹å¼ï¼Œ å…ˆ disable constraintï¼Œåˆªé™¤æƒ³åˆªçš„è³‡æ–™å¾Œï¼Œå† enable constraintï¼Œç¯„ä¾‹å¦‚ä¸‹ï¼š
alter table {TABLE_NAME} disable constraint {FOREIGN_KEY_NAME} cascade; -- åŸ·è¡Œåˆªé™¤è³‡æ–™ alter table {TABLE_NAME} enable novalidate constraint {FOREIGN_KEY_NAME}; å€¼å¾—ç‰¹åˆ¥æ³¨æ„çš„æ˜¯ï¼Œåœ¨ enable constraint æ™‚ï¼Œè‹¥æ²’æœ‰åŠ ä¸Š novalidateï¼Œ å¯èƒ½æœƒç™¼ç”Ÿ ORA-02298: ç„¡æ³•é©—è­‰ (%s.%s) - æœªæ‰¾åˆ°çˆ¶é …é—œéµå­— éŒ¯èª¤ï¼Œ å› ç‚º Oracle åœ¨ enable constraint æ™‚ï¼Œæœƒæª¢æ ¸åŸæœ‰è³‡æ–™æ˜¯å¦ç¬¦åˆç´„æŸï¼Œ åŠ ä¸Š novalidate å°±å¯ä»¥å†åº¦ç¹éè³‡æ–™åº«çš„æª¢æ ¸ã€‚
æä¸æ¸…æ¥šè‡ªå·±åœ¨åšä»€éº¼çš„è©±ï¼Œä¸è¦äº‚ç”¨é€™æ‹›ã€‚</content></entry><entry><title>å»ºç½® Gulp å‰ç«¯è‡ªå‹•åŒ–æ•´åˆå·¥å…·</title><url>https://2ndbrain.cc/posts/2021/07/setup-gulp/</url><categories><category>æŠ€è¡“</category></categories><tags><tag>yarn</tag><tag>gulp</tag><tag>github-pages</tag><tag>github-actions</tag></tags><content type="html"> æœ€è¿‘å¹«åˆ‡ç‰ˆå°ˆæ¡ˆå»ºç½®ä¸€æ•´å¥— CI/CD è‡ªå‹•åŒ–æµç¨‹ï¼Œä»¥å¾Œåªè¦ push åˆ° main branch ä¸Šï¼Œ å°±æœƒè‡ªå‹•éƒ¨ç½²åˆ° GitHub Pagesï¼Œçµ‚æ–¼ä¸ç”¨è‡ªå·±æ‰‹å‹•åˆä½µåˆ° gh-pages branch å† push å›‰ï½
å®‰è£ gulp CLI å› ç‚º yarn 1 çš„åŸ·è¡Œæ•ˆèƒ½æ¯” npm 2 å¥½ï¼Œæ‰€ä»¥å°±æ±ºå®šç”¨ Homebrew å®‰è£ yarn 3 ä¾†ç®¡ç†å¥—ä»¶ã€‚
brew install yarn ä½¿ç”¨ yarn å®‰è£ gulp 4ã€‚
yarn global add gulp-cli æŸ¥çœ‹ gulp CLI æ˜¯å¦å®‰è£æˆåŠŸã€‚
gulp -v CLI version: 2.3.0 Local version: Unknown å®‰è£ gulp å¥—ä»¶ å…ˆç§»å‹•åˆ°ç›®æ¨™å°ˆæ¡ˆå…§ï¼Œå†åˆå§‹åŒ–å°ˆæ¡ˆã€‚
cd path/to/project yarn init å·²åˆ‡ç‰ˆå°ˆæ¡ˆç‚ºä¾‹ï¼Œåˆå§‹åŒ–å¾Œæœƒç”¢ç”Ÿ package.json æª”
{ &amp;#34;name&amp;#34;: &amp;#34;hello-web-layout&amp;#34;, &amp;#34;version&amp;#34;: &amp;#34;1.0.0&amp;#34;, &amp;#34;description&amp;#34;: &amp;#34;Web layout practices&amp;#34;, &amp;#34;main&amp;#34;: &amp;#34;index.js&amp;#34;, &amp;#34;repository&amp;#34;: &amp;#34;https://github.com/{USER_ACCOUNT}/hello-web-layout.git&amp;#34;, &amp;#34;author&amp;#34;: &amp;#34;Irene&amp;#34;, &amp;#34;license&amp;#34;: &amp;#34;None&amp;#34;, &amp;#34;private&amp;#34;: true } å®‰è£ gulp å¥—ä»¶ã€‚
yarn add gulp --dev æŸ¥çœ‹ gulp æ˜¯å¦åœ¨å°ˆæ¡ˆå…§ (Local) å®‰è£æˆåŠŸã€‚
gulp -v CLI version: 2.3.0 Local version: 4.0.2 ä½¿ç”¨ç·¨è¼¯å™¨æ–°å¢ gulpfile.js æª”æ¡ˆï¼Œä¸¦åŠ å…¥ task å…§å®¹å¦‚ä¸‹ï¼š
function defaultTask(cb) { // place code for your default task here cb(); } exports.default = defaultTask æˆåŠŸåŸ·è¡Œ gulp æŒ‡ä»¤åŸ·è¡Œ taskã€‚
gulp [00:15:57] Using gulpfile path/to/project/gulpfile.js [00:15:57] Starting &amp;#39;default&amp;#39;... [00:15:57] Finished &amp;#39;default&amp;#39; after 1.64 ms å®‰è£ gulp ç›¸é—œå’Œå…¶ä»–å¥—ä»¶ å®‰è£ä»¥ä¸‹å¥—ä»¶ä»¥å»ºç«‹è‡ªå‹•åŒ–æµç¨‹ã€‚
# å°‡ gulp ç›¸é—œå¥—ä»¶ç”¨ $ ä¾†å¼•å…¥ yarn add gulp-load-plugins --dev # æ¸…é™¤ç·¨è­¯å¾Œçš„æª”æ¡ˆ yarn add gulp-clean --dev # å°‡æª”æ¡ˆè®Šæ›´åŒæ­¥åˆ°ç€è¦½å™¨ç•«é¢ yarn add browser-sync --dev # éƒ¨ç½²åˆ° GitHub Pages yarn add gulp-gh-pages --dev æŸ¥çœ‹ package.json æª”ï¼Œè‡ªå‹•æ›´æ–°åˆ° devDependencies ä¸­ã€‚
&amp;#34;devDependencies&amp;#34;: { &amp;#34;browser-sync&amp;#34;: &amp;#34;^2.27.4&amp;#34;, &amp;#34;gulp&amp;#34;: &amp;#34;^4.0.2&amp;#34;, &amp;#34;gulp-clean&amp;#34;: &amp;#34;^0.4.0&amp;#34;, &amp;#34;gulp-gh-pages&amp;#34;: &amp;#34;^0.5.4&amp;#34;, &amp;#34;gulp-load-plugins&amp;#34;: &amp;#34;^2.0.7&amp;#34; } ç·¨è¼¯ gulpfile.js æª”æ¡ˆï¼Œä¸¦åŠ å…¥ task å…§å®¹å¦‚ä¸‹ï¼š
const gulp = require(&amp;#39;gulp&amp;#39;); const $ = require(&amp;#39;gulp-load-plugins&amp;#39;)({lazy: false}); const browserSync = require(&amp;#39;browser-sync&amp;#39;).create(); const staticFiles = [ &amp;#34;path/to/assets/**/*&amp;#34;, ]; const distPath = &amp;#39;./dist&amp;#39;; function clean() { return gulp.src(distPath, { read: false, allowEmpty: true, }) .pipe($.clean()); } function copy() { return gulp.src(staticFiles) .pipe(gulp.dest(distPath)) .pipe( browserSync.reload({ stream: true, }), ); } function synchronize() { browserSync.init({ server: { baseDir: distPath, }, port: 8080, }); } function watch() { gulp.watch(staticFiles, gulp.series(copy)); } function deploy() { return gulp.src(`${distPath}/**/*`) .pipe($.ghPages()); } exports.default = gulp.series(clean, copy, gulp.parallel(synchronize, watch)); exports.clean = clean; exports.build = gulp.series(clean, copy); exports.deploy = deploy; å»ºç½® GitHub Actions è‡ªå‹•éƒ¨ç½² ç·¨è¼¯ package.json æª”ï¼Œåœ¨ scripts å€å¡Šå®šç¾©æŒ‡ä»¤ã€‚
&amp;#34;scripts&amp;#34;: { &amp;#34;test&amp;#34;: &amp;#34;echo \&amp;#34;Error: no test specified\&amp;#34; &amp;amp;&amp;amp; exit 1&amp;#34;, &amp;#34;build&amp;#34;: &amp;#34;gulp build&amp;#34;, &amp;#34;start&amp;#34;: &amp;#34;gulp&amp;#34;, &amp;#34;deploy&amp;#34;: &amp;#34;gulp deploy&amp;#34; }, ä»¥åˆ‡ç‰ˆå°ˆæ¡ˆç‚ºä¾‹ï¼Œåœ¨ hello-web-layout/.github/workflows/main.yml åŠ å…¥ GitHub Actions è…³æœ¬ï¼Œ è‡ªå‹•å»ºç½®å’Œéƒ¨ç½²ç¶²é åˆ° GitHub Pagesã€‚
name: github pages on: push: branches: [ main ] workflow_dispatch: jobs: build: name: Build and deploy GitHub Pages runs-on: ubuntu-18.04 steps: - uses: actions/checkout@v2 - name: Setup Node uses: actions/setup-node@v2 with: node-version: &amp;#39;14&amp;#39; cache: &amp;#39;yarn&amp;#39; - name: Caching yarn dependencies run: yarn install - name: Build run: yarn build - name: Deploy to GitHub Pages run: |cd ./dist git init git config --local user.name ${YOUR_USER_NAME} git config --local user.email ${YOUR_USER_EMAIL} git remote add origin https://${{secrets.DEPLOY_GITHUB_PAGE_SECRET}}@github.com/${YOUR_USER_NAME}/hello-web-layout.git git checkout -b gh-pages git add --all git commit -m &amp;#34;Deploy to GitHub Pages by GitHub Actions&amp;#34; git push origin gh-pages -f echo ğŸ¤˜ Deploy to GitHub Pages completed. Home | Yarn - Package Manager &amp;#x21a9;&amp;#xfe0e;
npm &amp;#x21a9;&amp;#xfe0e;
yarn â€” Homebrew Formulae &amp;#x21a9;&amp;#xfe0e;
gulp.js &amp;#x21a9;&amp;#xfe0e;</content></entry><entry><title>åœ¨ Spring Boot ä½¿ç”¨ AOP å°æ—¥èªŒ</title><url>https://2ndbrain.cc/posts/2021/06/spring-boot-aop-log/</url><categories><category>æŠ€è¡“</category></categories><tags><tag>spring-boot</tag><tag>aop</tag></tags><content type="html"> ä½¿ç”¨ AOP (Aspect Oriented Programming) çš„æ–¹å¼å°å‡ºæ—¥èªŒï¼Œæœƒæ¯”åœ¨å„è™•ç¨‹å¼ä¸­å¯«å°æ—¥èªŒä¾†çš„ç°¡æ½”ï¼Œ é›†ä¸­ç®¡ç†å°æ—¥èªŒçš„ç¨‹å¼ï¼Œé¿å…å½±éŸ¿é–±è®€æ¥­å‹™é‚è¼¯ã€‚
å»ºç½® Log4j2 åƒè€ƒé€™ç¯‡å»ºç½® Log4j2 æ–‡ç« ã€‚
åŠ å…¥ Dependency åœ¨ build.gradle åŠ å…¥ Spring Boot AOP dependenciesï¼šspring-boot-starter-aopï¼Œ
dependencies { implementation &amp;#39;org.springframework.boot:spring-boot-starter-web&amp;#39; implementation &amp;#39;org.springframework.boot:spring-boot-starter-aop&amp;#39; compileOnly &amp;#39;org.projectlombok:lombok:1.18.18&amp;#39; annotationProcessor &amp;#39;org.projectlombok:lombok:1.18.18&amp;#39; testImplementation &amp;#39;org.springframework.boot:spring-boot-starter-test&amp;#39; } å®šç¾© TimeLogAspect æƒ³åƒå„å€‹æ¥­å‹™é‚è¼¯æ˜¯ç¸±å‘çš„æµç¨‹ï¼Œè€Œ AOP å°±æ˜¯å°‡æµç¨‹æ©«å‰–å¾Œç¹”å…¥ç¨‹å¼ï¼Œè—‰æ­¤é”åˆ°é—œæ³¨é»åˆ†é›¢ã€‚ åœ¨å…ƒä»¶ä¸Šæ¨™è¨» @Aspectï¼Œå³å¯å®šç¾©ç‚ºä¸€å€‹åˆ‡é¢ï¼Œæ³¨æ„ä¹Ÿè¦å°‡ç‰©ä»¶åŠ è¨» @Componentï¼Œ Spring Boot æ¡†æ¶æ‰å¾—ä»¥ç®¡ç†é€™å€‹å…ƒä»¶ã€‚
åœ¨æ–¹æ³•ä¸Šæ¨™è¨» @Around æŒ‡çš„æ˜¯åœ¨åˆ‡é¢çš„å‰ã€å¾Œç¹”å…¥ç¨‹å¼ï¼Œåƒæ•¸ ProceedingJoinPoint æ˜¯ç›¸å°æ–¼æ©«åˆ‡é¢çš„ç¸±å‘è³‡æ–™æµï¼Œ å¯ä»¥ç”±æ­¤åƒæ•¸å–å¾—è³‡æ–™æµä¸­çš„æ–¹æ³•ç°½ç« å’Œå‚³å…¥åƒæ•¸ç­‰è³‡è¨Šã€‚
è€Œ @Pointcut å®šç¾©åˆ‡é¢çš„åˆ‡é»ï¼Œä¾‹å¦‚ï¼Œåˆ‡é»å¯ä»¥æ˜¯æœ‰æ¨™è¨»è‡ªå®šç¾©çš„ Annotationï¼Œ æˆ–æ˜¯æŸå€‹ Controller Package ä¸‹çš„æ‰€æœ‰ methodã€‚
ä»¥ä¸‹æ˜¯å®šç¾©åœ¨æ‰€æœ‰æ¨™è¨» @TimeLog æˆ– Controller çš„ Aspect ç¯„ä¾‹ï¼Œè¨ˆç®—åŸ·è¡Œé€™äº›æ–¹æ³•éœ€è¦å¤šå°‘æ™‚é–“ï¼Œ ä¸¦å°‡åŸ·è¡Œæ™‚é–“æ–¼æ–¹æ³•å›å‚³å¾Œå°åˆ°æ—¥èªŒä¸­ã€‚
@Log4j2 @Aspect @Component public class TimeLogAspect { @Around(&amp;#34;logTime() || controller()&amp;#34;) public Object logAround(ProceedingJoinPoint pjp) throws Throwable { long startMillis = System.currentTimeMillis(); Object proceed = pjp.proceed(); long executionTime = System.currentTimeMillis() - startMillis; log.info(String.format(&amp;#34;Completed %s in %d ms&amp;#34;, pjp.getSignature().toShortString(), executionTime)); return proceed; } @Pointcut(&amp;#34;@annotation(cc.secondbrain.demo.annotation.TimeLog)&amp;#34;) public void logTime() { } @Pointcut(&amp;#34;execution(* cc.secondbrain.demo.controller.*.*(..))&amp;#34;) public void controller() { } } è‡ªå®šç¾© Annotation @TimeLog å¦‚ä¸‹ï¼Œ
@Target(ElementType.METHOD) @Retention(RetentionPolicy.RUNTIME) public @interface TimeLog { } ä½¿ç”¨è‡ªå®šç¾© Annotation @TimeLogï¼Œå¯ä»¥è‡ªç”±åœ°åœ¨æƒ³è¦è¨˜éŒ„åŸ·è¡Œæ™‚é–“çš„æ–¹æ³•ä¸Šè¨»è¨˜ï¼Œä½†åªé™æ–¼ public æ–¹æ³•ã€‚ å€¼å¾—ç‰¹åˆ¥æ³¨æ„çš„æ˜¯ï¼Œå‡å¦‚åœ¨ Controller è¨»è¨˜ @TimeLogï¼Œåªæœƒå°å‡ºä¸€è¡ŒåŸ·è¡Œæ™‚é–“çš„æ—¥èªŒï¼Œä¸æœƒé‡è¤‡å°æˆå…©è¡Œã€‚
@RestController public class HelloController { @TimeLog @RequestMapping(&amp;#34;/&amp;#34;) public String hello() { return &amp;#34;Hello Spring Boot&amp;#34;; } }</content></entry><entry><title>å»ºç½® Log4j2</title><url>https://2ndbrain.cc/posts/2021/06/setup-log4j2/</url><categories><category>æŠ€è¡“</category></categories><tags><tag>gradle</tag><tag>lombok</tag><tag>log4j2</tag></tags><content type="html"> Log4j2 æ˜¯ä¸€å¥—åŸ·è¡Œæ•ˆèƒ½ä¸éŒ¯çš„æ—¥èªŒå·¥å…·ï¼ŒLombok 1 å°‡ Log4j2 æ—¥èªŒå·¥å…·æ•´åˆå…¶ä¸­ï¼Œ Lombok ä¹Ÿè®“ Log4j2 ä½¿ç”¨èµ·ä¾†æ›´ç°¡æ½”ã€‚
å»ºç½® Log4j2 åœ¨ build.gradle åŠ å…¥ Lombok dependenciesï¼Œ
dependencies { implementation &amp;#39;org.springframework.boot:spring-boot-starter-web&amp;#39; compileOnly &amp;#39;org.projectlombok:lombok:1.18.18&amp;#39; annotationProcessor &amp;#39;org.projectlombok:lombok:1.18.18&amp;#39; testImplementation &amp;#39;org.springframework.boot:spring-boot-starter-test&amp;#39; } åƒè€ƒ Log4j2 çš„æ–‡ä»¶ä¸­çš„ Console Appender å»ºç«‹ log4j2.xml è¨­å®šæª”ï¼Œ å…¶ä»–ç”¨é€”çš„æ—¥èªŒè¨­å®šï¼Œå¯ä»¥åƒè€ƒæ–‡ä»¶çš„ Appenders ç« ç¯€ 2ï¼› å®¢è£½åŒ–èª¿æ•´æ—¥èªŒæ¨£å¼ï¼Œå¯ä»¥åƒè€ƒæ–‡ä»¶çš„ Pattern Layout ç« ç¯€ 3ã€‚
&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;UTF-8&amp;#34;?&amp;gt; &amp;lt;Configuration&amp;gt; &amp;lt;Appenders&amp;gt; &amp;lt;Console name=&amp;#34;STDOUT&amp;#34; target=&amp;#34;SYSTEM_OUT&amp;#34;&amp;gt; &amp;lt;PatternLayout pattern=&amp;#34;%m%n&amp;#34;/&amp;gt; &amp;lt;/Console&amp;gt; &amp;lt;/Appenders&amp;gt; &amp;lt;Loggers&amp;gt; &amp;lt;Root level=&amp;#34;info&amp;#34;&amp;gt; &amp;lt;AppenderRef ref=&amp;#34;STDOUT&amp;#34;/&amp;gt; &amp;lt;/Root&amp;gt; &amp;lt;/Loggers&amp;gt; &amp;lt;/Configuration&amp;gt; ä½¿ç”¨æ—¥èªŒ åœ¨è¦å°å‡ºæ—¥èªŒçš„ class å®£å‘Šä¸Šæ¨™æ³¨ @Log4j2ï¼Œå°±å¯ä»¥ç”¨ log å°å‡ºä¸åŒç­‰ç´šçš„æ—¥èªŒã€‚
@Log4j2 @RestController public class HelloController { @RequestMapping(&amp;#34;/&amp;#34;) public String hello() { log.info(&amp;#34;hello log4j2&amp;#34;); return &amp;#34;Hello Spring Boot&amp;#34;; } } projectlombok/lombok: Very spicy additions to the Java programming language. &amp;#x21a9;&amp;#xfe0e;
Log4j â€“ Log4j 2 Appenders &amp;#x21a9;&amp;#xfe0e;
Log4j â€“ Log4j 2 Layouts &amp;#x21a9;&amp;#xfe0e;</content></entry><entry><title>è¨­å®š cURL Connect Timeout æ™‚é–“</title><url>https://2ndbrain.cc/posts/2021/06/curl-connect-timeout/</url><categories><category>æŠ€è¡“</category></categories><tags><tag>curl</tag></tags><content type="html"> å› ç‚º curl çš„é è¨­ Timeout æ™‚é–“ç‚º 5 åˆ†é˜1ï¼Œæ‰€ä»¥åœ¨é€²è¡Œ Timeout çš„æ¸¬è©¦æ™‚ï¼Œè¦ç­‰å¾…å¾ˆé•·çš„æ™‚é–“ï¼Œ
å¯ä»¥é€éè¨­å®š --connect-timeout åƒæ•¸ï¼Œä»¥æ¸›å°‘ç­‰å¾…æ™‚é–“ã€‚
# è¨­å®š Timeout ç‚º 5 ç§’ curl http://localhost:8080 --connect-timeout 5 curl/connect.h at master Â· curl/curl Â· GitHub &amp;#x21a9;&amp;#xfe0e;</content></entry><entry><title>åŸ·è¡Œ Junit Jupiter æ¸¬è©¦çš„ç–‘é›£é›œç—‡</title><url>https://2ndbrain.cc/posts/2021/05/setup-junit-jupiter/</url><categories><category>æŠ€è¡“</category></categories><tags><tag>gradle</tag><tag>junit-jupiter</tag></tags><content type="html"> ä»¥ä¸‹ç”¨ Gradle 6.8.3 ç‚ºä¾‹ï¼Œåˆ—å‡ºå¹¾å€‹åœ¨åŸ·è¡Œ Junit Jupiter æ¸¬è©¦æ™‚çš„ç–‘é›£é›œç—‡ï¼Œå¸Œæœ›èƒ½å°‘é»è¸©é›·çš„æ™‚é–“ã€‚
Cannot resolve symbol &amp;lsquo;jupiter&amp;rsquo; åœ¨ build.gradle åŠ å…¥ junit-jupiter çš„ dependencyï¼Œ
dependencies { ... // Use JUnit test framework testImplementation &amp;#39;org.junit.jupiter:junit-jupiter-api:5.3.2&amp;#39; } ç™¼ç”Ÿ PreconditionViolationException è‹¥æ˜¯åœ¨åŸ·è¡Œæ¸¬è©¦æ™‚ï¼Œç¨‹å¼æ‹‹å‡º PreconditionViolationException: Cannot create Launcher without at least one TestEngine; consider adding an engine implementation JAR to the classpathï¼Œ
org.gradle.api.internal.tasks.testing.TestSuiteExecutionException: Could not complete execution for Gradle Test Executor 1. at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) at com.sun.proxy.$Proxy2.stop(Unknown Source) at org.gradle.api.internal.tasks.testing.worker.TestWorker.stop(TestWorker.java:133) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:182) at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:164) at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:414) at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64) at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56) at java.lang.Thread.run(Thread.java:745) Caused by: org.junit.platform.commons.util.PreconditionViolationException: Cannot create Launcher without at least one TestEngine; consider adding an engine implementation JAR to the classpath at org.junit.platform.commons.util.Preconditions.condition(Preconditions.java:295) at org.junit.platform.launcher.core.DefaultLauncher.&amp;lt;init&amp;gt;(DefaultLauncher.java:48) at org.junit.platform.launcher.core.LauncherFactory.create(LauncherFactory.java:105) at org.junit.platform.launcher.core.LauncherFactory.create(LauncherFactory.java:75) at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:97) at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61) ... 25 more åœ¨ build.gradle åŠ å…¥ junit-jupiter-engine çš„ dependencyï¼Œæ³¨æ„æ˜¯ Runtime æœƒä½¿ç”¨åˆ° Test Engineï¼Œ
dependencies { ... // Use JUnit test framework testImplementation &amp;#39;org.junit.jupiter:junit-jupiter-api:5.3.2&amp;#39; testRuntimeOnly &amp;#39;org.junit.jupiter:junit-jupiter-engine:5.3.2&amp;#39; } ç™¼ç”Ÿ ClassNotFoundException è‹¥æ˜¯åœ¨åŸ·è¡Œæ¸¬è©¦æ™‚ï¼Œç¨‹å¼æ‹‹å‡º ClassNotFoundException: org.junit.platform.engine.support.discovery.SelectorResolverï¼Œ
org.gradle.api.internal.tasks.testing.TestSuiteExecutionException: Could not complete execution for Gradle Test Executor 6. at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) at com.sun.proxy.$Proxy2.stop(Unknown Source) at org.gradle.api.internal.tasks.testing.worker.TestWorker.stop(TestWorker.java:133) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:182) at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:164) at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:414) at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64) at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56) at java.lang.Thread.run(Thread.java:745) Caused by: org.junit.platform.commons.JUnitException: TestEngine with ID &amp;#39;junit-jupiter&amp;#39; failed to discover tests at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverEngineRoot(EngineDiscoveryOrchestrator.java:111) at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discover(EngineDiscoveryOrchestrator.java:85) at org.junit.platform.launcher.core.DefaultLauncher.discover(DefaultLauncher.java:92) at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75) at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99) at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61) ... 25 more Caused by: java.lang.NoClassDefFoundError: org/junit/platform/engine/support/discovery/SelectorResolver at org.junit.jupiter.engine.JupiterTestEngine.discover(JupiterTestEngine.java:69) at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverEngineRoot(EngineDiscoveryOrchestrator.java:103) ... 32 more Caused by: java.lang.ClassNotFoundException: org.junit.platform.engine.support.discovery.SelectorResolver at java.net.URLClassLoader.findClass(URLClassLoader.java:381) at java.lang.ClassLoader.loadClass(ClassLoader.java:424) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331) at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ... 34 more åœ¨ build.gradle å°‡ junit-jupiter å’Œ junit-jupiter-engine çš„ dependencyï¼Œé™ç‰ˆè‡³ 5.3.xï¼Œ
dependencies { ... // Use JUnit test framework testImplementation &amp;#39;org.junit.jupiter:junit-jupiter-api:5.3.2&amp;#39; testRuntimeOnly &amp;#39;org.junit.jupiter:junit-jupiter-engine:5.3.2&amp;#39; }</content></entry><entry><title>æ’ç¨‹åŸ·è¡Œ Cucumber æ¸¬è©¦</title><url>https://2ndbrain.cc/posts/2021/05/separate-cucumber-test/</url><categories><category>æŠ€è¡“</category></categories><tags><tag>gradle</tag><tag>cucumber</tag><tag>github-actions</tag></tags><content type="html"> ä½•æ™‚åŸ·è¡Œæ•´åˆæ¸¬è©¦ï¼Ÿ é€šå¸¸æ•´åˆæ¸¬è©¦åŸ·è¡Œæ™‚é–“æ¯”å–®å…ƒæ¸¬è©¦é•·å¾ˆå¤šï¼Œä¹Ÿå› ç‚ºæ•´åˆæ¸¬è©¦çš„åŸ·è¡Œé »ç‡ç„¡æ³•åƒå–®å…ƒæ¸¬è©¦ä¸€æ¨£é »ç¹ï¼Œæ¯”è¼ƒé©åˆæ¯æ—¥æ’ç¨‹åŸ·è¡Œã€‚ ç‚ºäº†åœ¨é€²è¡Œé–‹ç™¼è€Œé »ç¹åŸ·è¡Œæ¸¬è©¦æ™‚ï¼Œä¸éœ€è¦ç­‰å¾…æ•´åˆæ¸¬è©¦åŸ·è¡Œï¼Œæ‰€ä»¥ç‰¹åˆ¥å°‡æ•´åˆæ¸¬è©¦ç¨ç«‹æˆä¸€å€‹ Source Setï¼Œä¸å’Œå–®å…ƒæ¸¬è©¦ç¨‹å¼æ”¾åœ¨ä¸€èµ·ã€‚
å¦ä¸€ç¨®æ–¹å¼æ˜¯å°‡æ•´åˆæ¸¬è©¦ç¨ç«‹æˆä¸€å€‹å°ˆæ¡ˆï¼Œåœ¨ Gradle è¨­å®šä¸Šæ‡‰è©²æœƒæ¯”è¼ƒç°¡å–® XDã€‚ ä»¥ä¸‹èªªæ˜æ˜¯é‡å°æ¯”è¼ƒæå‰›çš„ Gradle Source Set 1ã€‚
è¨­å®š Cucumber Gradle Task åˆå§‹åŒ– Gradle å°ˆæ¡ˆ
gradle init åœ¨ build.gradle æª”åŠ å…¥ integration Source Set ç›¸é—œè¨­å®š
â‘  æ–°å¢ integration Source Set
sourceSets { integration { java.srcDir &amp;#34;/src/integration/java&amp;#34; resources.srcDir &amp;#34;/src/integration/resources&amp;#34; } } â‘¡ åŠ å…¥æ•´åˆæ¸¬è©¦æœƒç”¨åˆ°çš„ Cucumber Dependency 2
dependencies { ... integrationImplementation &amp;#39;io.cucumber:cucumber-java:6.8.1&amp;#39; } â‘¢ åŠ å…¥ Configuration åœ¨ Runtime ä½¿ç”¨ Cucumber Dependency
configurations { cucumberRuntime.extendsFrom integrationImplementation } â‘£ æ–°å¢ cucumber Task
æ³¨æ„ï¼š ä»¥ä¸‹åœ¨åŸ·è¡Œ io.cucumber.core.cli.Main æ‰€å¸¶å…¥çš„åƒæ•¸é™£åˆ— args ä¸­ï¼Œ ç¬¬ 4 å€‹åƒæ•¸æ˜¯æŒ‡ Cucumber Step Definition çš„ Java ç¨‹å¼ç¢¼æ‰€åœ¨çš„ Packageï¼Œ è€Œ 5 å€‹åƒæ•¸æ˜¯æŒ‡ Cucumber Feature æª”çš„æ‰€åœ¨è·¯å¾‘
task cucumber() { dependsOn assemble, integrationClasses doLast { javaexec { main = &amp;#34;io.cucumber.core.cli.Main&amp;#34; classpath = configurations.cucumberRuntime + sourceSets.integration.output args = [&amp;#39;--plugin&amp;#39;, &amp;#39;pretty&amp;#39;, &amp;#39;--glue&amp;#39;, &amp;#39;scenario&amp;#39;, &amp;#39;src/integration/resources&amp;#39;] } } } åŸ·è¡Œ Gradle Task cucumber ç¢ºèª Cucumber å®‰è£æˆåŠŸ
./gradlew cucumber æ’°å¯« Feature å’Œ Step Definition ä»¥ RSA åŠ è§£å¯†éœ€æ±‚ç‚ºä¾‹ï¼Œ
åœ¨ src/integration/resources å…§çš„ feature è·¯å¾‘æ–°å¢ Cryptosystem.feature å¦‚ä¸‹ Feature:Encrypt and Decrypt with RSA Scenario:Press button to generate RSA key pair Given Navigate to cryptosystem page When I press button to generate RSA key pair Then I should be able to download key pair zip file src/integration/java å…§çš„ Package scenario æ–°å¢å°æ‡‰çš„ Cryptosystem.java å¦‚ä¸‹ï¼Œï¼ˆæœªæ’°å¯«æ¸¬è©¦ç¨‹å¼ï¼‰ package scenario; import io.cucumber.java.en.Given; import io.cucumber.java.en.Then; import io.cucumber.java.en.When; public class Cryptosystem { @Given(&amp;#34;Navigate to cryptosystem page&amp;#34;) public void navigate_to_cryptosystem_page() { } @When(&amp;#34;I press button to generate RSA key pair&amp;#34;) public void i_press_button_to_generate_rsa_key_pair() { } @Then(&amp;#34;I should be able to download key pair zip file&amp;#34;) public void i_should_be_able_to_download_key_pair_zip_file() { } } åŸ·è¡Œ Gradle Task cucumber ç¢ºèª Cucumber æ¸¬è©¦æˆåŠŸ ./gradlew cucumber GitHub Actions æ’ç¨‹åŸ·è¡Œæ•´åˆæ¸¬è©¦ åŠ å…¥ GitHub Actions è…³æœ¬ .github/workflows/cucumber.ymlï¼Œè‡ªå‹•æ’ç¨‹åŸ·è¡Œ Cucumber æ¸¬è©¦ã€‚
name: Cucumber Daily Test on: schedule: # At 0AM UTC of every day - cron: &amp;#34;0 0 * * *&amp;#34; jobs: build: runs-on: ubuntu-18.04 steps: - uses: actions/checkout@v2 - name: Set up JDK 11 uses: actions/setup-java@v2 with: java-version: &amp;#39;11&amp;#39; distribution: &amp;#39;adopt&amp;#39; - name: Grant execute permission for gradlew run: chmod +x gradlew - name: Run cucumber test run: ./gradlew cucumber Separate Gradle Tasks for Unit and Integration Tests - INSPEERITY - Agile Software Factory &amp;#x21a9;&amp;#xfe0e;
10 Minute Tutorial - Cucumber Documentation &amp;#x21a9;&amp;#xfe0e;</content></entry><entry><title>å»ºç«‹å®¹å™¨åŒ– Spring Boot å°ˆæ¡ˆ</title><url>https://2ndbrain.cc/posts/2021/04/spring-boot-docker-image/</url><categories><category>æŠ€è¡“</category></categories><tags><tag>spring-boot</tag><tag>gradle</tag><tag>docker</tag></tags><content type="html"> å»ºç«‹æ–° Spring Boot å°ˆæ¡ˆ ä½¿ç”¨ Intellij IDEA å»ºç«‹æ–°å°ˆæ¡ˆï¼Œå°ˆæ¡ˆè³‡è¨Šå¦‚ä¸‹ï¼š
Spring Boot ç‰ˆæœ¬ï¼š2.4.5 å°ˆæ¡ˆé¡å‹ï¼šGradle èªè¨€ï¼šJava 11 â‘  ä½¿ç”¨ Intellij IDEA å…§çš„ Spring Initailizr å‰µå»ºæ–°å°ˆæ¡ˆ â‘¡ åŠ å…¥ Spring Web Dependency å¢åŠ  HelloController.java å¦‚ä¸‹ï¼š
package cc.secondbrain.demo.controller; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RestController; @RestController public class HelloController { @RequestMapping(&amp;#34;/&amp;#34;) public String hello() { return &amp;#34;Hello Spring Boot&amp;#34;; } } å•Ÿå‹• Spring Boot æœå‹™ï¼Œç”¨ç€è¦½å™¨ç€è¦½ http://localhost:8080/ï¼Œå°±å¯ä»¥çœ‹åˆ°ã€ŒHello Spring Bootã€
å®¹å™¨åŒ– Spring Boot å®‰è£ Docker Desktop å•Ÿå‹• Docker Desktop Spring Boot 2.3.0 ç‰ˆé–‹å§‹æ”¯æ´ Cloud Native Buildpacks 1ï¼Œ åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤å»ºç½® Docker Image åˆ° Local çš„ Docker daemon ./gradlew bootBuildImage --imageName=springbootdemo å•Ÿå‹•å®¹å™¨åŒ– Spring Boot æœå‹™ docker run -it -p8080:8080 springbootdemo How to Docker with Spring Boot | Okta Developer &amp;#x21a9;&amp;#xfe0e;</content></entry><entry><title>æŸ¥è©¢ç³»çµ±è³‡è¨ŠæŒ‡ä»¤</title><url>https://2ndbrain.cc/posts/2021/04/system-basic-info/</url><categories><category>æŠ€è¡“</category></categories><tags><tag>linux</tag><tag>database</tag></tags><content type="html"> Linux ç³»çµ±è³‡è¨Š æŸ¥çœ‹ Linux ç‰ˆæœ¬è³‡è¨Š
cat /etc/os-release æŸ¥çœ‹ Linux Kernel ç‰ˆæœ¬è³‡è¨Š
uname -r Oracle Database ç³»çµ±è³‡è¨Š ä½¿ç”¨è³‡æ–™åº«ç®¡ç†å·¥å…· Oracle SQL Devloper æŸ¥çœ‹ Oracle Database ç‰ˆæœ¬è³‡è¨Šï¼š
Reports â†’ About Your Database â†’ Version Banner
æˆ–åŸ·è¡Œ SQL æŸ¥çœ‹ Oracle Database ç‰ˆæœ¬è³‡è¨Š
SELECT * FROM v$version;</content></entry><entry><title>202102 æ¼”åŒ–å¼è¨­è¨ˆï¼šæ¸¬è©¦é©…å‹•é–‹ç™¼èˆ‡æŒçºŒé‡æ§‹ -- å¿ƒå¾—</title><url>https://2ndbrain.cc/posts/2021/04/202102-tdd-refactoring/</url><categories><category>æ—¥èªŒ</category></categories><tags><tag>tdd</tag><tag>refactoring</tag></tags><content type="html"> ä¸Šå®Œ [æ¼”åŒ–å¼è¨­è¨ˆï¼šæ¸¬è©¦é©…å‹•é–‹ç™¼èˆ‡æŒçºŒé‡æ§‹] 1ï¼Œèª²å¾Œå…©å€‹æœˆè£œè¨˜å¿ƒå¾—å’Œç­†è¨˜ã€‚
ç†Ÿç·´ Tennis Kata TDD ç·´ç¿’ï¼Œä¸Šå‚³åˆ° Youtube é »é“ äº†è§£ Code Smell å’Œ Refactoring ç›¸é—œçŸ¥è­˜ ç†Ÿç·´èª²å ‚ä¸Šçš„ BudgetCalculator TDD é‡æ§‹ç·´ç¿’ å°ˆæ¥­æœ‰åƒ¹ æ—©åœ¨ 2018 å·¦å³å°±è½èªª 91 çš„èª² 2ï¼Œç•¶æ™‚çœ‹åˆ°ä¸Šèª²æ™‚é–“å±…ç„¶åœ¨åŠå¹´å¾Œï¼Œè€Œä¸”ä¸€å ‚èª²è¦åƒ¹è¶…éä¸€è¬å…ƒï¼Œå°±ä¸€ç›´è™•æ–¼è§€æœ›ç‹€æ…‹è€Œæ²’æœ‰å ±åèª²ç¨‹ã€‚ å¹¸å¥½åœ¨é€™æœŸé–“æˆ‘çœ‹äº†ã€Šåˆ»æ„ç·´ç¿’ã€‹å¾Œï¼Œå°±ä¸€ç›´å¿ƒå¿ƒå¿µå¿µæƒ³æ‰¾åˆ°åˆ©ç”¨ã€Œåˆ»æ„ç·´ç¿’ã€æ¨¡å¼æ•™å­¸çš„èª²ç¨‹ï¼Œå†åŠ ä¸Šæˆ‘é–‹å§‹èªåŒã€Œå°ˆæ¥­æœ‰åƒ¹ã€ï¼ŒèŠ±éŒ¢å°±èƒ½è²·åˆ°åˆ¥äººç´¯ç©çš„åŠŸåŠ›ï¼Œè¶…ç´šåˆ’ç®—ã€‚ æ–¼æ˜¯ï¼Œåœ¨å‰©ä¸‹æœ€å¾Œå¹¾å€‹åé¡æ™‚ï¼Œè¶•ç·Šæ‰‹åˆ€å ±åï¼Œå¿ƒè£¡æƒ³ä¸ç®¡ç™¼ç”Ÿä»€éº¼äº‹ï¼Œéƒ½ä¸èƒ½å¦¨ç¤™æˆ‘å»ä¸Šèª²ï¼Œè¦æ˜¯å†ä¸åšå‡ºè¡Œå‹•ï¼Œç¾åœ¨é€™é–€èª²æ˜¯é–‹èª²å‰ä¸€å¹´å°±é¡æ»¿ â‹¯â‹¯
å¾äº†è§£éœ€æ±‚é–‹å§‹ ç”±å¯¦ä½œçš„äººå»å•å‡ºéœ€æ±‚ ç”¨å…·é«”çš„ä¾‹å­è«‡éœ€æ±‚ï¼Œç”šè‡³ç”¨éŒ¯èª¤çš„ä¾‹å­èª˜å°å°æ–¹è¬›å‡ºæ­£ç¢ºçš„éœ€æ±‚ èªªåˆ°è¨è«–éœ€æ±‚ï¼Œè¿‘æ—¥æœ‰æ–°çš„æ„Ÿæƒ³ï¼Œæˆ‘çµ‚æ–¼å¯ä»¥å¯Ÿè¦ºå‡ºã€Œå•å‡ºéœ€æ±‚ã€å’Œã€Œæ“¬å®šåšæ³•ã€æ˜¯å…©å›äº‹ã€‚ ä»¥å‰å¾ˆå¤šæ™‚å€™ï¼Œæˆ‘åªæ˜¯åœ¨è¦†æ ¸ PM æå‡ºçš„èª¿æ•´å¯ä¸å¯è¡Œï¼Œè€Œæ²’æœ‰å»æ¢ç©¶èƒŒå¾Œçš„éœ€æ±‚ï¼Œç¾åœ¨å¯ä»¥ç·´ç¿’å†å¤šå•ã€æƒ³åšå‡ºèª¿æ•´çš„åŸå› ï¼Ÿã€å’Œå•ã€ä»€éº¼æœƒæƒ³ç”¨é€™å€‹æ–¹å¼èª¿æ•´ï¼Ÿã€ï¼Œ é€™æ¨£æ‰èƒ½æœ‰è¶³å¤ çš„è³‡è¨Šé¸æ“‡æœ€é©ç•¶çš„åšæ³•ã€‚å¦å¤–ï¼Œæˆ‘ç™¼ç¾æˆ‘å¾ˆç¿’æ…£ç”¨ç°¡çŸ­æˆ–æ²’æ•´ç†éçš„æè¿°å’Œå…¶ä»–äººè¨è«–äº‹æƒ…ï¼Œç”¨å…·é«”çš„ä¾‹å­å’Œå…¶ä»–äººæºé€šæ˜¯æˆ‘é‚„éœ€è¦å¤šç·´ç¿’çš„èª²é¡Œã€‚
ä¾¿åˆ©è²¼èµ·æ‰‹å¼ æ‹†è§£æœƒéœ€è¦çš„ç¨‹å¼ç¢¼ç‰‡æ®µï¼Œå¯ä½¿ç”¨ä¾¿åˆ©è²¼æˆ– Mind Map å·¥å…· å’Œåœ˜éšŠæˆå“¡ä¸€èµ·æ±ºå®šå‘½åæˆ– API è¦æ ¼ ä»¥å‰æˆ‘éƒ½æœƒä¸€é‚Šè¨­è¨ˆç¨‹å¼ä¸€é‚Šæ•²éµç›¤ï¼Œå› ç‚ºè¦ºå¾—èˆ‡å…¶èŠ±æ™‚é–“åœ¨è…¦è¢‹ä¸€ç›´ç©ºæƒ³ï¼Œé‚„ä¸å¦‚ç›´æ¥å°±é–‹å§‹å¯«ç¨‹å¼ï¼Œé‚Šç†è§£éœ€æ±‚é‚Šå¯«ç¨‹å¼é‚„é‚Šé‡æ§‹ï¼Œè‡ªä»¥ç‚ºæˆ‘çœŸæ˜¯æœƒæ•æ·é–‹ç™¼ï¼Œ ä½†æ˜¯å¸¸å¸¸ç™¼ç”Ÿ A è¨­è¨ˆå¯«åˆ°ä¸€åŠè¦ºå¾—ä¸å¤ å¥½ï¼Œæ‡‰è©²è¦æ”¹æˆ B è¨­è¨ˆï¼ŒB è¨­è¨ˆå¯«åˆ°ä¸€åŠç™¼ç¾æœ‰æƒ…å¢ƒæ²’è€ƒæ…®åˆ°ï¼Œæ‰€ä»¥ä¸€é–‹å§‹æ‰æœƒå¯«æˆ A è¨­è¨ˆé‚£æ¨£ï¼Œ æ”¹éä¾†åˆæ”¹å›å»ï¼Œæåˆ°æœ€å¾Œæ²’æ™‚é–“å¥½å¥½æ¢³ç†ç¨‹å¼æ¶æ§‹å’Œæµç¨‹ã€‚
æ‰€ä»¥äºŒæœˆé€±æœ«ä¸Šå®Œèª²ï¼Œé€±ä¸€é€²è¾¦å…¬å®¤ï¼Œæˆ‘å°±ä¹–ä¹–åˆ°æ–‡å…·æ«ƒå»æ‹¿ä¸€æœ¬ä¾¿åˆ©è²¼ä¾†ç”¨ï¼Œä»”ç´°æ‹†è§£æœƒéœ€è¦çš„ç¨‹å¼ç¢¼ç‰‡æ®µï¼Œå†é–‹å§‹æ•²ç¨‹å¼ç¢¼ï¼Œ å¯«ç¨‹å¼æœ‰æ˜é¡¯è®Šå¾—æ¯”è¼ƒé †ï¼Œæ€è·¯ä¹Ÿæ¯”è¼ƒå‘¨å…¨ï¼Œåè€ŒèŠ±æ¯”è¼ƒå°‘æ™‚é–“é–‹ç™¼ï¼Œå°æ–¼ Task çš„å®Œæˆåº¦æ›´æœ‰ä¿¡å¿ƒã€‚
å®‰æ’æ¸¬è©¦æ¡ˆä¾‹ï¼Œå°æ­¥é‡æ§‹ æ¸¬è©¦æ¡ˆä¾‹å¿…é ˆæ˜¯ä½¿ç”¨æƒ…å¢ƒï¼Œå‘½åè¦æè¿° Domainï¼Œä¸èƒ½å‡ºç¾å…·é«”çš„ä¾‹å­åç¨± æ¸¬è©¦æ¡ˆä¾‹å¾æœ€ç°¡å–®çš„æ¡ˆä¾‹é–‹å§‹å¯«ï¼Œå¦‚æœè¦æ”¹å¤ªå¤šå°±æ‹†å°ä¸€é» æœ€ç°¡å–®çš„æ„æ€æ˜¯ï¼šåŠ æœ€å°‘çš„ç¨‹å¼ç¢¼ç‰‡æ®µï¼Œæˆ–è¤‡è£½æ¸¬è©¦æ¡ˆä¾‹æ”¹æœ€å°‘çš„ç¨‹å¼ç¢¼ç‰‡æ®µã€‚
TDD åªéœ€è¦åˆ—å‡ºå¯ä»¥æŠŠéœ€è¦çš„ç¨‹å¼ç¢¼ç‰‡æ®µé–‹ç™¼å®Œæˆå³å¯ï¼Œä¸ç”¨åˆ—å‡ºæ‰€æœ‰æ¡ˆä¾‹ æˆ‘ä¹‹å‰ä»¥ç‚ºç”¨æ’åˆ—çµ„åˆåˆ—å‡ºæ‰€æœ‰æ¸¬è©¦æ¡ˆä¾‹ï¼Œå°±æ˜¯æœ€ç³»çµ±åŒ–çš„æ–¹å¼ï¼Œå®Œå…¨æ²’æƒ³éæ¸¬è©¦æ¡ˆä¾‹çš„é †åºæ˜¯è¦åˆ»æ„å®‰æ’çš„ï¼Œ æ‰€ä»¥ä¸€æ¬¡ä¸æœƒæ”¹å‹•å¤ªå¤šç¨‹å¼ï¼Œæ¯”è¼ƒæ²’æœ‰é™¤éŒ¯å£“åŠ›ï¼Œæ­é…ä¾¿åˆ©è²¼èµ·æ‰‹å¼ä¸€èµ·æœç”¨æ›´æœ‰æ•ˆã€‚ å…ˆåšå¥½å…¨å±€çš„æ€è€ƒï¼Œé€™æ™‚å€™å†é–‹å§‹ç”¨ TDD çš„æ–¹å¼å¯«ç¨‹å¼ï¼š
Baby Stepï¼šä¸€æ¬¡åšå°‘ä¸€é»ï¼Œç„¶å¾Œè©²åšçš„æœ‰åšå®Œï¼ˆä¸€å€‹å®Œæ•´çš„ä½¿ç”¨æƒ…å¢ƒï¼‰ ç´…ç‡ˆ â†’ ç¶ ç‡ˆï¼šç„¡è…¦é€šéæ¸¬è©¦æ¡ˆä¾‹ ç¶ ç‡ˆ â†’ é‡æ§‹ï¼šå¾åˆ»æ„ç”¢ç”Ÿé‡è¤‡çš„ç¨‹å¼ç¢¼æ¼”é€²æˆ Production Code è¨­è¨ˆ é‡æ§‹ Legacy Code Legacy Code æ˜¯å¯¦å‹™ä¸Šæœ€å¸¸æœƒé‡åˆ°çš„æƒ…æ³ï¼Œé€šå¸¸ Legacy Code æ²’æœ‰å–®å…ƒæ¸¬è©¦ä¿è­·ï¼Œæ‰€ä»¥å°±æ²’äººæ•¢æ”¹ã€‚ åˆ©ç”¨å–®å…ƒæ¸¬è©¦å’Œå¼·å¤§çš„ IDE å·¥å…· 3 è‡ªå‹•ç”¢ç”Ÿç¨‹å¼ç¢¼åšé‡æ§‹ï¼Œå®‰å…¨åœ°è·³è„«æƒ¡æ€§å¾ªç’°ï¼š
æ•´ç†ä»£ç¢¼ï¼šåˆªé™¤ commentã€èª¿æ•´çˆ›å‘½åã€å¤šé¤˜ç©ºç™½è¡Œã€Temp Variables æ•´ç†æµç¨‹ï¼šæ¶ˆé™¤é‡è¤‡ã€å‡¸é¡¯æ„åœ– ä¸è¦å¤ªæ—©æŠ½æ–¹æ³•ï¼Œæœƒä¸å®¹æ˜“çœ‹å‡ºé‡è¤‡ï¼Œå¯ç”¨ Inline Method å›å¾© Methodã€‚
æ”¹é‚è¼¯è¦æœ‰å°æ‡‰çš„æ¸¬è©¦ä¿è­· åˆ†è·è²¬ ç‰©ä»¶å°å‘ï¼ˆé«˜å…§èšï¼‰ï¼šç”¨ç‰©ä»¶æ¨¡å‹æ¨¡æ“¬çœŸå¯¦ä¸–ç•Œï¼ŒæŠŠè³‡æ–™å¾€ç‰©ä»¶å †ï¼Œå«ç‰©ä»¶åšäº‹ Design Patternï¼ˆä½è€¦åˆï¼‰ åŸå‰‡ä¸Šè¨­è¨ˆå¿ƒæ³•å°±æ˜¯ç”¨æœ€ç°¡å–®çš„æ–¹å¼æ»¿è¶³ä½¿ç”¨è€…æƒ…å¢ƒï¼Œä¸¦ä¸”å¯«æœ€å°‘çš„é˜²å‘†ï¼Œåƒæ•¸è¶Šå°‘è¶Šå¥½ç”¨ã€‚
Keep it Simple, don&amp;rsquo;t overdesign your solution.
çµè«– [æ¼”åŒ–å¼è¨­è¨ˆï¼šæ¸¬è©¦é©…å‹•é–‹ç™¼èˆ‡æŒçºŒé‡æ§‹] æ˜¯ [é‡å°éºç•™ä»£ç¢¼åŠ å…¥å–®å…ƒæ¸¬è©¦çš„è—è¡“] å’Œ [æ¥µé€Ÿé–‹ç™¼] å…©é–€èª²çš„é›†å¤§æˆï¼Œä¸Šå®Œèª²å¾Œä»éœ€è¦ä¸æ–·ç·´ç¿’å’Œåæ€ï¼Œæ‰èƒ½æŒçºŒé€²æ­¥ã€‚ åŸæœ¬èª²å‰é ç¿’å°±æ‡‰è©²è¦å…ˆäº†è§£ Code Smell å’Œ Refactoring ç›¸é—œçŸ¥è­˜ï¼Œ ä½†åœ¨ä¸Šèª²å‰æˆ‘æ²’æœ‰ç¢ºå¯¦åšåˆ°ï¼Œç¾åœ¨è¦è£œä¸‹åŸºæœ¬åŠŸï¼Œä¹Ÿè—‰æ­¤ç£ä¿ƒè‡ªå·±è¦ç†Ÿç·´èª²å ‚ä¸Šçš„é‡æ§‹ç·´ç¿’ã€‚
ã€æ¼”åŒ–å¼è¨­è¨ˆï¼šæ¸¬è©¦é©…å‹•é–‹ç™¼èˆ‡æŒçºŒé‡æ§‹ã€‘ 202102 å°åŒ— | In 91 - é»éƒ¨è½ &amp;#x21a9;&amp;#xfe0e;
æœ€å¥½çš„ TDD å­¸ç¿’è³‡æº - æ•æ·é–‹ç™¼è»ç«åº« &amp;#x21a9;&amp;#xfe0e;
JetBrains: Essential tools for software developers and teams &amp;#x21a9;&amp;#xfe0e;</content></entry><entry><title>Hugo æ•™å­¸ -- é€²éšç¯‡</title><url>https://2ndbrain.cc/posts/2021/04/get-advanced-hugo/</url><categories><category>æŠ€è¡“</category></categories><tags><tag>hugo</tag><tag>godaddy</tag><tag>github-actions</tag><tag>google-analytics</tag><tag>utterances</tag></tags><content type="html"> æœ¬ç¯‡åˆ©ç”¨ Hugo å»ºç«‹å€‹äººåŒ–ç¶²ç«™ï¼ŒåŸºæœ¬æ‡‰ç”¨åƒè€ƒ Hugo ç³»åˆ—æ–‡ï¼š
Hugo æ•™å­¸ &amp;ndash; åŸºç¤ç¯‡ Hugo æ•™å­¸ &amp;ndash; é€²éšç¯‡ Custom Domain åœ¨ GoDaddy è³¼è²·å±¬æ–¼è‡ªå·±çš„ç¶²åŸŸï¼Œä¾‹å¦‚ï¼š2ndbrain.cc åœ¨ Terminal ç”¨æŒ‡ä»¤ dig æŸ¥è©¢å€‹äºº GitHub Pages çš„ IP dig {YOUR_USER_NAME}.github.io åœ¨ GoDaddy è¨­å®š IP å’Œ è½‰å€ Domain åœ¨ Repository {YOUR_USER_NAME}.github.io çš„ Settings &amp;gt;&amp;gt; Pages è¨­å®š Custom domain åœ¨ Repository {YOUR_USER_NAME}.github.io çš„æ ¹ç›®éŒ„åŠ å…¥ CNAME æª”æ¡ˆ echo &amp;#39;YOUR_DOMAIN&amp;#39; &amp;gt;&amp;gt; CNAME echo &amp;#39;2ndbrain.cc&amp;#39; &amp;gt;&amp;gt; CNAME GitHub Actions è‡ªå‹•å»ºç½®å’Œéƒ¨ç½² GitHub Pages åœ¨ hugo-site/.github/workflows/main.yml åŠ å…¥ GitHub Actions è…³æœ¬ 1ï¼Œè‡ªå‹•å»ºç½®å’Œéƒ¨ç½²ç¶²é åˆ° GitHub Pages 2ã€‚
name: github pages # Controls when the action will run. on: # Triggers the workflow on push event but only for the main branch push: branches: [ main ] # Allows you to run this workflow manually from the Actions tab workflow_dispatch: # A workflow run is made up of one or more jobs that can run sequentially or in parallel jobs: # This workflow contains a single job called &amp;#34;build&amp;#34; build: name: Build and deploy GitHub Pages # The type of runner that the job will run on runs-on: ubuntu-18.04 # Steps represent a sequence of tasks that will be executed as part of the job steps: # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it - uses: actions/checkout@v2 with: submodules: true # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: &amp;#39;0.82.0&amp;#39; # extended: true - name: Build run: hugo --minify - name: Deploy run: |cd ./public echo &amp;#39;${YOUR_DOMAIN}&amp;#39; &amp;gt;&amp;gt; CNAME git init git config --local user.name ${YOUR_USER_NAME} git config --local user.email ${YOUR_USER_EMAIL} git status git remote add origin https://${{secrets.DEPLOY_GITHUB_PAGE_SECRET}}@github.com/${YOUR_USER_NAME}/${YOUR_USER_NAME}.github.io.git git checkout -b main git add --all git commit -m &amp;#34;Deploy to GitHub Pages by GitHub Actions&amp;#34; git push origin main -f echo ğŸ¤˜ Deploy to GitHub Pages completed. Google Analytics åœ¨ Google Analytics æ–°å¢è³‡æºè¨­å®š åœ¨ config.toml åŠ ä¸Šè¨­å®šï¼Œå•Ÿç”¨ Hugo å…§å»º internal templates 3 googleAnalytics = &amp;#34;G-MEASUREMENT_ID&amp;#34; åœ¨æ¨£å¼ä¸­åŠ å…¥ /layouts/_internal/google_analytics.html gtag.js æª”æ¡ˆ &amp;lt;!-- Global site tag (gtag.js) - Google Analytics --&amp;gt; &amp;lt;script async src=&amp;#34;https://www.googletagmanager.com/gtag/js?id=${G-MEASUREMENT_ID}&amp;#34;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag(&amp;#39;js&amp;#39;, new Date()); gtag(&amp;#39;config&amp;#39;, &amp;#39;${G-MEASUREMENT_ID}&amp;#39;); &amp;lt;/script&amp;gt; åœ¨ç¶²ç«™çš„æ¯ä¸€é åŠ å…¥ Google Analytics template {{ template &amp;#34;_internal/google_analytics.html&amp;#34; . }} åœ¨ Google Analytics åˆ†æç¶²ç«™æµé‡ utterances ç•™è¨€ç³»çµ± åœ¨ GitHub å»ºç«‹ä¸€å€‹ Public Repositoryï¼Œä¾‹å¦‚ utterances-comment å®‰è£ utterances åˆ° Repository utterances-comment åˆ©ç”¨ utterances å®˜ç¶²ç”¢ç”Ÿ templateï¼Œåœ¨æ¨£å¼ä¸­åŠ å…¥ /layouts/_internal/comment.html javascript æª”æ¡ˆ &amp;lt;script src=&amp;#34;https://utteranc.es/client.js&amp;#34; repo=&amp;#34;[ENTER REPO HERE]&amp;#34; issue-term=&amp;#34;pathname&amp;#34; theme=&amp;#34;github-light&amp;#34; crossorigin=&amp;#34;anonymous&amp;#34; async&amp;gt; &amp;lt;/script&amp;gt; åœ¨æ¯ç¯‡æ–‡ç« åŠ å…¥ utterances template {{ template &amp;#34;_internal/comment.html&amp;#34; . }} Host on GitHub | Hugo &amp;#x21a9;&amp;#xfe0e;
æ·±å…¥ä½†ä¸æ·ºå‡ºï¼Œå¦‚ä½•ç”¨ github actions è‡ªå‹•ç™¼ä½ˆ gh-pages | by Milk Midi | Medium &amp;#x21a9;&amp;#xfe0e;
Internal Templates | Hugo &amp;#x21a9;&amp;#xfe0e;</content></entry><entry><title>Hugo æ•™å­¸ -- åŸºç¤ç¯‡</title><url>https://2ndbrain.cc/posts/2021/04/get-started-hugo/</url><categories><category>æŠ€è¡“</category></categories><tags><tag>github-pages</tag><tag>hugo</tag></tags><content type="html"> æœ¬ç¯‡åˆ©ç”¨ Hugo å¾ç„¡åˆ°æœ‰å»ºç«‹å€‹äººç¶²ç«™ï¼Œé€²éšæ‡‰ç”¨åƒè€ƒ Hugo ç³»åˆ—æ–‡ï¼š
Hugo æ•™å­¸ &amp;ndash; åŸºç¤ç¯‡ Hugo æ•™å­¸ &amp;ndash; é€²éšç¯‡ Get Started 1 2 åœ¨ GitHub å»ºç«‹ä¸€å€‹ Private Repository hugo-site ç®¡ç†ç¶²ç«™åŸå§‹ç¢¼ åœ¨ GitHub å»ºç«‹ä¸€å€‹ Public Repository {YOUR_USER_NAME}.github.io ç”¨ä¾†ä¸Šå‚³éœæ…‹ç¶²é åˆ° GitHub Pages ä¸‹è¼‰ hugo-site åˆ° Local git clone https://github.com/{YOUR_USER_NAME}/hugo-site.git æˆ–ä¸‹è¼‰åŒ…å« Git Submodule çš„ Repository åˆ° Local
git clone --recursive https://github.com/{YOUR_USER_NAME}/hugo-site.git ä½¿ç”¨ Homebrew å®‰è£ Hugo brew install hugo ä½¿ç”¨ Hugo CLI ç¢ºèª Hugo å®‰è£æ˜¯å¦æˆåŠŸ
hugo version åœ¨æ”¾ç½® hugo-site çš„åŒå±¤è·¯å¾‘ï¼ˆé hugo-site è³‡æ–™å¤¾å…§ï¼‰ï¼Œä½¿ç”¨ Hugo CLI å»ºç«‹æ–°éœæ…‹é é¢ç¶²ç«™ hugo new site hugo-site è‹¥ç™¼ç”Ÿä»¥ä¸‹éŒ¯èª¤ï¼š
Error: /path/to/hugo-site already exists and is not empty. See --force.
åŠ ä¸Šåƒæ•¸ --force å¼·åˆ¶å»ºç«‹ç¶²ç«™
hugo new site hugo-site --force åœ¨ themes.gohugo.io ç¶²ç«™æ¨£å¼ï¼ŒFork æ¬²é¸æ¨£å¼çš„ Repository åˆ°è‡ªå·±çš„ GitHubï¼Œä»¥æ–¹ä¾¿èª¿æ•´æ¨£å¼ ä»¥ hugo-theme-next æ¨£å¼ 3 ç‚ºä¾‹ï¼Œå°‡æ¨£å¼å°ˆæ¡ˆä»¥ Submodule å½¢å¼åŠ å…¥ hugo-site cd hugo-site git submodule add https://github.com/{YOUR_USER_NAME}/hugo-theme-next.git themes/next æ ¹æ“š ./themes/next/config.toml çš„è¨­å®šèª¿æ•´ ./config.toml ä½¿ç”¨ Hugo CLI å»ºç«‹æ–°æ–‡ç«  hugo new posts/2021/04/get-started-hugo.md ä½¿ç”¨ Hugo CLI åœ¨ Local èµ· Serverï¼Œå»ºç½®ä¸¦åœ¨ http://localhost:1313/ æª¢è¦–ç¶²ç«™æ›´æ–° hugo server -D æª¢è¦–æ–°æ–‡ç«  http://localhost:1313/posts/2021/04/get-started-hugo/
ä½¿ç”¨ Hugo CLI åœ¨ hugo-site/public å»ºè£½éœæ…‹ç¶²é  å°‡ hugo-site/public Push åˆ° Repository {YOUR_USER_NAME}.github.io å¾Œï¼Œåœ¨ https://{YOUR_USER_NAME}.github.io/ æª¢è¦–ç¶²ç«™æ›´æ–° Hugo è²¼èº«æ‰“é€ å€‹äººéƒ¨è½æ ¼ :: ç¬¬ 12 å±† iT é‚¦å¹«å¿™éµäººè³½ &amp;#x21a9;&amp;#xfe0e;
Quick Start | Hugo &amp;#x21a9;&amp;#xfe0e;
xtfly/hugo-theme-next: This is a hugo theme forked from hexo-theme-next &amp;#x21a9;&amp;#xfe0e;</content></entry></search>